---

- name: Get OpenSSH client version
  environment:
    LC_MESSAGES: 'C'
  shell: '/usr/bin/env ssh -V 2>&1 | grep --only-matching --extended-regexp --regexp="OpenSSH_[a-z0-9\.]+"'
  register: _ssh_client__version_raw
  changed_when: False
  check_mode: no

- name: Format OpenSSH client version
  set_fact:
    _ssh_client__version: "{{ _ssh_client__version_raw.stdout|regex_replace('^OpenSSH_([0-9]+\\.[0-9]+).*', '\\1') }}"
